# ============================
# Makefile pour le Serveur TCP
# ============================

#Variables
CC = gcc
CFLAGS = -I.
TARGETS = server client
SERVER_SRC = server.c
CLIENT_SRC = client.c

SERVER_OBJ = $(SERVER_SRC:.c=.o)
CLIENT_OBJ = $(CLIENT_SRC:.c=.o)

#RÃ¨gle principale
all: $(TARGETS)

#Compilation du serveur
server: $(SERVER_OBJ)
	@echo "ðŸ”¨Compilation du serveur..."
	$(CC) $(CFLAGS) -o server $(SERVER_OBJ)
	@echo "âœ… Serveur compilÃ© avec succÃ¨s."

#Compilation du client
client: $(CLIENT_OBJ)
	@echo "ðŸ”¨Compilation du client..."
	$(CC) $(CFLAGS) -o client $(CLIENT_OBJ)
	@echo "âœ… Client compilÃ© avec succÃ¨s."

#Compilation des fichiers sources en objets
%.o: %.c
	@echo "ðŸ”¨Compilation de $<..."
	$(CC) $(CFLAGS) -c $< -o $@

#ðŸ§¹Nettoyage des fichiers objets et exÃ©cutables
clean:
	@echo "ðŸ§¹Nettoyage des fichiers objets..."
	rm -f $(SERVER_OBJ) $(CLIENT_OBJ)
	@echo "ðŸ§¹Nettoyage terminÃ©."

fclean: clean
	@echo "ðŸ§¹Suppression des exÃ©cutables..."
	rm -f $(TARGETS)
	@echo "ðŸ§¹Suppression terminÃ©e."

#Recompilation complÃ¨te
re: fclean all

#Aide
help:
	@echo "ðŸ“ Commandes disponibles:"
	@echo "  make ou make all â†’ Compile server.c et client.c"
	@echo "  make server      â†’ Compile uniquement server.c"
	@echo "  make client      â†’ Compile uniquement client.c"
	@echo "  make clean       â†’ Supprime les fichiers objets (.o)"
	@echo "  make fclean      â†’ Supprime les exÃ©cutables et les objets"
	@echo "  make re          â†’ Nettoie tout (fclean) et recompile entiÃ¨rement le projet (all)"
	@echo "  make help        â†’ Affiche les commandes disponibles"
